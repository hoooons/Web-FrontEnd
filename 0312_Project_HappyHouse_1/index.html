<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy House</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body>
    <!-- 상단 nav top -->
    <div class="container-fluid" style=" background-color: whitesmoke;
    color: white;
    height:100px;
    line-height: 100px;
    font-size:50px;
    position: fixed;">
        <div class="container"> <a href="index.html" style="text-decoration:none; color:black;">Happy House</a>
            <a class="float-right mr-2" style="font-size:20px; color:black; font-weight: bold;" href="" id="toppass" data-toggle="modal" data-target="#passModal">비밀번호찾기</a>
            <a class="float-right mr-2" style="font-size:20px; color:black; font-weight: bold;" href="" id="topsignup" data-toggle="modal" data-target="#signUpModal">회원가입</a>
            <a class="float-right mr-2" style="font-size:20px; color:black; font-weight: bold;" href="" id="toplogin" data-toggle="modal" data-target="#myModal">로그인</a>
            <a class="admin float-right mr-2" style="font-size:20px; color:black; font-weight: bold; display: none;" href="" >회원정보수정</a>
            <a class="admin float-right mr-2" style="font-size:20px; color:black; font-weight: bold; display: none;" href="" >회원탈퇴</a>
            <a class="float-right mr-2" style="font-size:20px; color:black; font-weight: bold; display: none;" href="" id="toplogout">로그아웃</a>
            <a class="float-right mr-2" style="font-size:20px; color:black; font-weight: bold; display: none;" href="" id="topid" ></a>
        </div>
    </div>
    <div class="container-fluid " style="height:100px;"></div>
    <!-- 상단 navigator -->
    <nav class="navbar navbar-expand-sm" style=" background-color: whitesmoke;">
        <div class="container">
        <ul class="navbar-nav">
          <li class="nav-item" >
            <a class="nav-link" href="introduce.html" style="color:black; font-weight: bold;">소개</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" style="color:black; font-weight: bold;">공지사항</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" style="color:black; font-weight: bold;">동네정보</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" style="color:black; font-weight: bold;">대기오염</a>
          </li>
          <li class="nav-item">
            <a class="like nav-link" href="#" style="color:black; font-weight: bold; display:none;">관심지역추가</a>
          </li>
          <li class="nav-item">
            <a class="like nav-link" href="#" style="color:black; font-weight: bold; display:none;">대기오염</a>
          </li>
        </ul>
        </div>
      </nav>
    <!-- 상단 main-->
    <div class="container-fluid pl-0 pr-0" style="height:500px;">
    <div class="img1 top_main container-fluid ">
        <div style="padding-top: 200px; font-size:50px; font-weight: bold; color:black; font-family:'Courier New', Courier, monospace">
            <div style="width:50%; margin:0 auto; border-bottom:3px solid black;">행복한 우리집</div>
            <div style="font-size:30px;">FrontEnd-02</div>
        </div>
    </div>
    </div>
    <!-- 중단 main-->
    <div class="container" style="height:500px;">
        <div class="img2 float-left mt-5 mr-3 ml-5" style="width:300px; height:500px;">
            <div style="width:100%; height:91%;"></div>
            <button type="button" onclick="location.href='boardResult.html'" class="btn btn-light" style="width:80%;">실거래 검색 보기</button>
        </div>
        <div class="img3 float-left mt-5 mr-3 ml-5" style="width:300px; height:500px;">
            <div style="width:100%; height:91%;"></div>
            <button type="button" class="btn btn-light" style="width:80%;">부동산 최근동향</button>
        </div>
        <div class="img4 float-left mt-5 mr-3 ml-5" style="width:300px; height:500px;">
            <div style="width:100%; height:91%;"></div>
            <button type="button" onclick="location.href='https\://news.naver.com/main/list.nhn?mode=LS2D&mid=shm&sid1=101&sid2=260'" class="btn btn-light" style="width:80%;">주택이슈</button>
        </div>
    </div>
    
    <div class="container" style="height:100px;"></div>
    <!-- 지도 -->
	<div class="container">
	<div id="map" style="width:100%;height:500px;"></div>
	<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=	7be562c50856ad5febfffbab64c404e6"></script>
	<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=APIKEY&libraries=services"></script>
	<script>
		var container = document.getElementById('map');
		var options = {
			center: new kakao.maps.LatLng(33.450701, 126.570667),
			level: 3
		};
		
		var map = new kakao.maps.Map(container, options);
	</script>
	</div>
    <div class="container" style="height:50px;"></div>    
    
    <!-- footer -->
    <div>
        <div class="container-fluid" style="background-color: whitesmoke; height:300px;">
            <div class="container" style="height:300px;">
                <div class="row">
                    <div class="col-sm-2" style="height:300px;">
                        <div style="height:10%;"></div>
                        <img src="img/ssafy_logo.png">
                    </div>
                    <div class="col-sm-7" style="height:300px">
                        <div style="height:10%;"></div>
                        <h2>SSAFY . 02-3429-5100</h2>
                        <h6 style="border-bottom:1px solid black; padding-bottom: 10px;">본 사이트의 콘텐츠는 저작권법의 보호를 받는 바 무단 전재, 복사, 배포 등을 금합니다.</h6>
                        <h3 style="font-weight: bold;">제작</h3>
                        <ul>
                            <li><h5 style="font-weight: bold;">SSAFY 5기 황지훈</h5></li>
                            <li><h5 style="font-weight: bold;">SSAFY 5기 이재영</h5></li>
                        </ul>
                        <div style="height:5%"></div>
                        <div style="text-align: center; opacity: 70%;">Copyright@SSAFY. All rights reserved</dib>
                    </div>
                </div>
            </div>
        </div>
    </div>
	
    <!-- 로그인 모달창 -->
    </div>
        <div class="modal fade" id="myModal">
          <div class="modal-dialog">
           <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
            <h4 class="modal-title">Login</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
  
        <!-- Modal body -->
        <div class="modal-body">
            <div class="form-group">
                <label for="loginid">User ID (* 20자 이내)</label>
                <input type="text" class="form-control" placeholder="ID" id="loginid" name="loginid" required>
            </div>
            <div class="form-group">
                <label for="loginid">Password (* 20자 이내)</label>
                <input type="password" class="form-control" placeholder="Password" id="loginpwd" name="loginpwd" required>
            </div>
        </div>
  
        <!-- Modal footer -->
        <div class="modal-footer">
            <button type="button" class="loginbt btn btn-primary">Login</button>
            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
        </div>
        </div>
    </div>

    <!-- 회원가입 모달창-->
    <!-- The Modal -->
     <div class="modal fade" id="signUpModal">
        <div class="modal-dialog">
            <div class="modal-content">
      
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">SignUp</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        
        <!-- Modal body -->
        <div class="modal-body">
                <div class="form-group">
                <label for="usrid">User ID (* 20자 이내)</label>
                <input type="text" class="form-control" placeholder="ID" id="usrid" name="userid" required>
              </div>
              <div class="form-group">
                <label for="pwd">User Password (* 20자 이내)</label>
                <input type="password" class="form-control" placeholder="Password" id="pwd" name="password" required>
              </div>
              <div class="form-group">
                <label for="name">User Name (* 20자 이내)</label>
                <input type="text" class="form-control" placeholder="Name" id="name" name="name" required>
              </div>
              <div class="form-group">
                <label for="cp">User CellPhone (* 20자 이내)</label>
                <input type="text" class="form-control" placeholder="01055557777" id="cp" name="cellphone" required>
              </div>
              <div class="form-group">
                <label for="add">User Address (* 20자 이내)</label>
                <input type="text" class="form-control" placeholder="주소 상세" id="add" name="add" required>
              </div>
        </div>
        
        <!-- Modal footer -->
        <div class="modal-footer">
            <button type="button" class="searchbtn btn btn-primary" data-toggle="modal" data-target="#searchModal">Check</button>
            <button type="button" class="signUpbt btn btn-primary">SignUp</button>
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
        
        </div>
        </div>
    </div>

    <!-- 회원 정보 확인 모달창-->
     <!-- The Modal -->
     <div class="modal fade" id="searchModal" style="height:500px;">
        <div class="modal-dialog">
        <div class="modal-content">
      
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Check</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        
        <!-- Modal body -->
        <div class="modal-body">
          <div style="font-weight:bold; font-size:30px;">입력하신 정보를 확인해주세요</div>
          <div id = "div1" style="font-size:20px;">ID : </div>
          <div id = "div2" style="font-size:20px;">Password : </div>
          <div id = "div3" style="font-size:20px;">Name : </div>
          <div id = "div4" style="font-size:20px;">CellPhone : </div>
          <div id = "div5" style="font-size:20px;">Address : </div>
        </div>
        
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
        
        </div>
        </div>
    </div>

    <!-- 비밀번호 찾기 -->
     <!-- The Modal -->
     <div class="modal fade" id="passModal" style="height:500px;">
        <div class="modal-dialog">
        <div class="modal-content">
      
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Find Password</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        
        <!-- Modal body -->
        <div class="modal-body">
          <div style="font-weight:bold; font-size:30px;">개인정보를 입력해주세요</div>
          <div class="form-group">
            <label for="usrid">User ID (* 20자 이내)</label>
            <input type="text" class="form-control" placeholder="ID" id="findid" name="userid" required>
          </div>
          <div class="form-group">
            <label for="name">User Name (* 20자 이내)</label>
            <input type="text" class="form-control" placeholder="Name" id="findname" name="name" required>
          </div>
        </div>
        
        <!-- Modal footer -->
        <div class="modal-footer">
            <button type="button" class="findbtn btn btn-primary">Find</button>
            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
        
        </div>
        </div>
    </div>

    <!-- 자바스크립트 -->
    <script>

        // Modal창에서 로그인 버튼 클릭
    $('.loginbt').click(function(){
    	    $.ajax({
            url: 'userlistxml.jsp',
            type: 'GET',
            dataType: 'xml',
            success: function(response){
                loginList(response);
            },
            error: function(xhr, status, msg){
                console.log('오류');
            }
        });
    });
    
        // 로그인 확인
    function loginList(data){
    	let cnt = 0;
    	$(data).find('item').each(function(index, item){
    		console.log(cnt);
	    	if($('#loginid').val().length!=0){
	    		if($('#loginid').val()==$(this).find('id').text() && $('#loginpwd').val()==$(this).find('password').text() ){
	    			alert('로그인 성공 !');
	    			$('#toplogout').css('display','block');
	    			$('#topid').css('display','block').text($('#loginid').val());
	    			$('#toplogin').css('display','none');
	    			$('#topsignup').css('display','none');
	    			$('#toppass').css('display','none');
	    			$('.like').css('display','block');
	    			$('.admin').css('display','block');
	    			cnt--;
	    		}
	    		if(cnt==3){
	    			cnt=0;
	    			alert('입력을 확인하세요.');
	    		}
	    	}
	    	else if($('#loginid').val().length==0){
	    		aler('입력창을 확인하세요');
	    	}
	    	cnt++;
    	});
    	
    };
        // 로그아웃
    $('#toplogout').click(function(){
    	$('#toplogout').css('display','none');
		$('#topid').css('display','none').text($('#loginid').val());
		$('#toplogin').css('display','block');
		$('#topsignup').css('display','block');
		$('#toppass').css('display','block');
		$('.like').css('display','none');
		$('.admin').css('display','none');
    });

        // 회원가입버튼
    $('.signUpbt').click(function(){
        $.ajax({
            url: 'userlistxml.jsp',
            type: 'GET',
            dataType: 'xml',
            success: function(response){
                makeList(response);
            },
            error: function(xhr, status, msg){
                console.log('오류');
            }
        });
    });
    
    function makeList(data){
    	if($('#usrid').val().length!=0 && 
    			$('#pwd').val().length!=0 && 
    			$('#name').val().length!=0 && 
    			$('#cp').val().length!=0 && 
    			$('#add').val().length!=0) {
    		
    		let cnt = 0;
	        let MemID = $('#usrid').val();
	        $(data).find('item').each(function(index,item){
	            cnt++;
	            if(MemID == $(this).find('id').text()){
	                alert('중복된 ID입니다.');
	                cnt--;
	                console.log('중복 : ' + cnt);
	            }
	           if(cnt==4){
	        	   cnt=0;
	        	   alert('회원가입을 축하합니다.');
	        	   location.href="index.html";
	           }
	        });
	        
    	}
    	else if($('#usrid').val().length==0 || 
    			$('#pwd').val().length==0 || 
    			$('#name').val().length==0 || 
    			$('#cp').val().length==0 || 
    			$('#add').val().length==0 ) {
    		alert('입력칸을 확인해주세요.');
    	}
    };
    
    // 회원 정보 체크
    $('.searchbtn').click(function(){
    	$('#div1').text($('#div1').text() + $('#usrid').val());
        $('#div2').text($('#div2').text() + $('#pwd').val());
        $('#div3').text($('#div3').text() + $('#name').val());
        $('#div4').text($('#div4').text() + $('#cp').val());
        $('#div5').text($('#div5').text() + $('#add').val());
    })
    

    // 비밀 번호 찾기
    $('.findbtn').click(function(){
    	console.log(1);
        $.ajax({
            url: 'userlistxml.jsp',
            type: 'GET',
            dataType: 'xml',
            success: function(response){
                findList(response);
            },
            error: function(xhr, status, msg){
                console.log('오류');
            }
        });
    });

    function findList(data){
        let cnt = 0;
    	if($('#findid').val().length!=0 && 
    			$('#findname').val().length!=0){
        $(data).find('item').each(function(index,item){
	            cnt++;
                console.log($('#findid').val());
                console.log($(this).find('id').text());
	            if( $('#findid').val() == $(this).find('id').text()){
	                alert(`사용자의 PassWord는 ${$(this).find('password').text()} 입니다.`);
	                cnt--;
                    location.href="index.html";
	            }
	           if(cnt==4){
	        	   cnt=0;
	        	   alert('해당 정보가 존재하지않습니다.');
	           }
	        });
    	}
    	else if($('#findid').val().length==0 && $('#findname').val().length==0){
    		alert('입력창을 확인하세요');
    	}
    }
    </script>
</body>
</html>